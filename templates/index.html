{% extends "base.html" %}

{% block title %}Space Explorer - Home{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">
            <span class="title-line">Explore the</span>
            <span class="title-line highlight">Cosmos</span>
        </h1>
        <p class="hero-subtitle">
            Discover exoplanets beyond our solar system and unlock the mysteries of distant worlds.
        </p>
        <div class="hero-buttons">
            <a href="{{ url_for('exoplanets') }}" class="btn btn-primary">
                <i class="fas fa-rocket"></i>
                Explore Exoplanets
            </a>
            <a href="#stats" class="btn btn-secondary">
                <i class="fas fa-chart-line"></i>
                View Statistics
            </a>
        </div>
    </div>
    <div class="hero-visual">
        <div class="planet-container">
            <div class="planet planet-1"></div>
            <div class="planet planet-2"></div>
            <div class="planet planet-3"></div>
        </div>
    </div>
</div>

<section id="stats" class="stats-section">
    <div class="container">
        <h2 class="section-title">Exoplanet Statistics</h2>
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card loading">
                <div class="stat-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">Loading...</div>
                    <div class="stat-label">Total Planets</div>
                </div>
            </div>
            <div class="stat-card loading">
                <div class="stat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">Loading...</div>
                    <div class="stat-label">Host Stars</div>
                </div>
            </div>
            <div class="stat-card loading">
                <div class="stat-icon">
                    <i class="fas fa-calendar"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">Loading...</div>
                    <div class="stat-label">Discovery Year</div>
                </div>
            </div>
            <div class="stat-card loading">
                <div class="stat-icon">
                    <i class="fas fa-thermometer-half"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">Loading...</div>
                    <div class="stat-label">Avg Temperature</div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="features-section">
    <div class="container">
        <h2 class="section-title">Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-database"></i>
                </div>
                <h3>Real Data</h3>
                <p>Access real exoplanet data from NASA's Exoplanet Archive</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>Search & Filter</h3>
                <p>Find specific exoplanets or stars with advanced search capabilities</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h3>Visualizations</h3>
                <p>Explore data through interactive charts and visualizations</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load statistics
    fetch('/api/stats')
        .then(response => response.json())
        .then(data => {
            if (data.stats) {
                updateStats(data.stats);
            }
        })
        .catch(error => {
            console.error('Error loading stats:', error);
            showStatsError();
        });
});

function updateStats(stats) {
    const statsGrid = document.getElementById('statsGrid');
    const statCards = statsGrid.querySelectorAll('.stat-card');
    
    statCards[0].querySelector('.stat-number').textContent = stats.total_planets?.toLocaleString() || 'N/A';
    statCards[1].querySelector('.stat-number').textContent = stats.total_stars?.toLocaleString() || 'N/A';
    statCards[2].querySelector('.stat-number').textContent = stats.latest_discovery || 'N/A';
    statCards[3].querySelector('.stat-number').textContent = stats.avg_insolation ? 
        Math.round(stats.avg_insolation) + ' SâŠ•' : 'N/A';
    
    statCards.forEach(card => card.classList.remove('loading'));
}

function showStatsError() {
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach(card => {
        card.querySelector('.stat-number').textContent = 'N/A';
        card.classList.remove('loading');
    });
}
</script>
{% endblock %}
